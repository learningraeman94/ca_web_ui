# Веб-интерфейс CA

Веб-приложение для управления сертификатами, использующее FastAPI, SQLAlchemy, OpenSSL и Jinja2 с Bootstrap. Позволяет создавать и загружать Root CA, а также генерировать клиентские сертификаты.

## Требования

- Docker
- Python 3.12 (если запускается без Docker)
- Браузер с поддержкой JavaScript

## Установка и запуск

1. Клонируйте репозиторий:
   ```bash
   git clone <repository_url>
   cd ca_web_ui
2. Соберите Docker-образ:
    ```bash
    docker build -t ca-web-ui .
    ```
3. Запустите контейнер:
    ```bash
    docker run -d -p 8000:8000 -v $(pwd)/certs:/app/certs ca-web-ui
    ```
4. Откройте в браузере: http://localhost:8000

# Функциональность
- Главная страница: Обзор приложения.
- Сертификаты: Просмотр списка созданных клиентских сертификатов.
- Создать сертификат: Генерация нового клиентского сертификата с использованием выбранного Root CA.
- Управление Root CA: Создание нового Root CA или загрузка существующего (сертификат и ключ).

# Структура проекта
- `app/main.py`: Основное приложение FastAPI с маршрутами для отображения страниц и выполнения действий.
- `app/database.py`: Логика работы с базой данных SQLite через SQLAlchemy.
- `app/cert_utils.py`: Функции для работы с OpenSSL (генерация и проверка сертификатов).
- `app/templates/`: Шаблоны Jinja2 для веб-интерфейса (на русском).
- `app/static/`: Статические файлы (Bootstrap CSS и JS).
- `certs/`: Директория для хранения сертификатов и ключей.

# Установка Root CA на устройства
## Windows
- Скопируйте файл Root CA (например, `common_name_ca.crt`) на компьютер.
- Дважды щелкните по файлу `.crt` для открытия.
- Нажмите "Установить сертификат".
- Выберите "Локальный компьютер" (требуются права администратора) или "Текущий пользователь".
- Выберите хранилище "Доверенные корневые центры сертификации".
- Завершите установку, нажав "Готово".
- Перезапустите браузеры или приложения, использующие сертификаты.

## macOS
- Скопируйте файл Root CA на компьютер.
- Откройте приложение "Связка ключей" (Keychain Access).
- Перетащите файл `.crt` в раздел "Система" или выберите "Файл -> Импортировать - элементы".
- Найдите импортированный сертификат в "Связке ключей".
- Дважды щелкните по сертификату, в разделе "Доверие" выберите "Всегда доверять" для всех параметров.
- Введите пароль администратора для сохранения изменений.
- Перезапустите браузеры.

## Linux (Ubuntu/Debian)
- Скопируйте файл Root CA в `/usr/local/share/ca-certificates/`:
    ```bash
    sudo cp common_name_ca.crt /usr/local/share/ca-certificates/
    ```
- Обновите хранилище сертификатов:
    ```bash
    sudo update-ca-certificates
    ```
- Проверьте, что сертификат добавлен в `/etc/ssl/certs/`.
- Перезапустите приложения, использующие сертификаты.

## Android
- Скопируйте файл Root CA на устройство (например, через USB или email).
- Откройте "Настройки" -> "Безопасность" -> "Установить из хранилища".
- Выберите файл `.crt`.
- Укажите имя для сертификата и выберите "VPN и приложения" или "Wi-Fi" в зависимости от использования.
- Подтвердите установку (может потребоваться PIN-код или пароль).
- Перезапустите приложения или устройство.

## iOS
- Отправьте файл Root CA на устройство (например, через AirDrop или email).
- Откройте файл `.crt` на устройстве.
- Нажмите "Установить" в появившемся диалоге.
- Перейдите в "Настройки" -> "Общие" -> "Профиль" и подтвердите установку профиля.
- Активируйте сертификат: "Настройки" -> "Общие" -> "О программе" -> "Доверие сертификатам" -> включите ваш Root CA.
- Перезапустите браузер или приложение.

